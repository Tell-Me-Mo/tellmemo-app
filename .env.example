# PM Master V2 - Environment Configuration
# Copy this file to .env and update with your actual values
# Single source of truth for all environment variables

# ========================================
# üî¥ REQUIRED - YOU MUST FILL THESE IN
# ========================================

# ===== ANTHROPIC/CLAUDE API ===== (REQUIRED)
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# ===== SUPABASE CONFIGURATION ===== (REQUIRED)
# Get these from your Supabase project settings: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret

# ===== HUGGING FACE ===== (REQUIRED)
# Get your token from: https://huggingface.co/settings/tokens
# Needed for EmbeddingGemma model - app won't start without this
HF_TOKEN=your-huggingface-token-here

# ========================================
# üü¢ AUTO-CONFIGURED BY DOCKER-COMPOSE
# ========================================
# These work out of the box with docker-compose
# Only change if running services on different hosts

# ===== CORE SERVICES (Always Running) =====
# PostgreSQL - Main database
POSTGRES_USER=pm_master
POSTGRES_PASSWORD=pm_master_pass
POSTGRES_DB=pm_master_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Qdrant - Vector database for RAG
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=pm_master_vectors

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_LOG_LEVEL=debug
API_ENV=development
ENVIRONMENT=development

# ========================================
# üü° OPTIONAL - ENHANCE FUNCTIONALITY
# ========================================
# App works without these but you'll miss out on features

# ===== LANGFUSE OBSERVABILITY ===== (Optional - for LLM monitoring & cost tracking)
# Set to false to completely disable (won't start containers or use in backend)
# When enabled, requires: Redis, MinIO, Zookeeper, ClickHouse (auto-started with --profile langfuse)
LANGFUSE_ENABLED=false

# Langfuse Application Settings
LANGFUSE_DB=langfuse_db
LANGFUSE_URL=http://localhost:3000
LANGFUSE_HOST=http://localhost:3000
LANGFUSE_SECRET_KEY=your-langfuse-secret-key
LANGFUSE_PUBLIC_KEY=your-langfuse-public-key

# Langfuse Security (IMPORTANT: Change in production - must be at least 32 chars)
LANGFUSE_SECRET=your-secret-key-at-least-32-chars-long-change-in-production
LANGFUSE_SALT=your-salt-at-least-32-chars-long-change-in-production
# Generate with: openssl rand -hex 32
LANGFUSE_ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000
LANGFUSE_TELEMETRY=false
LANGFUSE_AUTH_DISABLE=false
LANGFUSE_AUTH_DISABLE_SIGNUP=false

# Langfuse Dependencies (Only used if LANGFUSE_ENABLED=true)
# Redis - Queue and caching for Langfuse
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redispassword123

# MinIO - S3-compatible storage for Langfuse events and media
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123

# ClickHouse - Analytics database for Langfuse
CLICKHOUSE_PASSWORD=clickhousepass123

# ===== SENTRY CONFIGURATION ===== (Optional - for error tracking)
# Backend Sentry (Python/FastAPI)
SENTRY_ENABLED=false
# Get your DSN from: https://sentry.io/
SENTRY_DSN=your-backend-sentry-dsn-here
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILE_SAMPLE_RATE=1.0

# ========================================
# ‚öôÔ∏è DEFAULT SETTINGS
# ========================================
# These have sensible defaults - only change if needed

# ===== SECURITY =====
API_KEY=development_api_key_change_in_production
CORS_ORIGINS=http://localhost:3001,http://localhost:8080,http://localhost:8100

# ===== DATABASE RESET ENDPOINT (Development Only) =====
ENABLE_RESET_ENDPOINT=true
RESET_API_KEY=development_reset_key

# ===== APPLICATION SETTINGS =====
MAX_FILE_SIZE_MB=10
CHUNK_SIZE_WORDS=300
CHUNK_OVERLAP_WORDS=50
# Choose: all-MiniLM-L6-v2 (lightweight) or google/embeddinggemma-300m (better quality)
EMBEDDING_MODEL=google/embeddinggemma-300m
EMBEDDING_DIMENSION=768
TOP_K_CHUNKS=5

# ===== LLM SETTINGS =====
LLM_MODEL=claude-3-5-haiku-latest
MAX_TOKENS=4096
TEMPERATURE=0.7

# ===== FRONTEND CONFIGURATION =====
FRONTEND_URL=http://localhost:8100
FLUTTER_API_BASE_URL=http://localhost:8000
FLUTTER_API_TIMEOUT=30000
FLUTTER_ENVIRONMENT=development
FLUTTER_ENABLE_LOGGING=true
FLUTTER_ENABLE_DEBUG_MODE=true

# Flutter Analytics & Error Tracking (Optional)
FLUTTER_SENTRY_ENABLED=false
FLUTTER_SENTRY_DSN=your-flutter-sentry-dsn-here
FLUTTER_FIREBASE_ANALYTICS_ENABLED=false

# ===== DOCKER ENVIRONMENT =====
NODE_ENV=development
LOG_LEVEL=INFO
